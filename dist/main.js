(()=>{"use strict";const t=new class{constructor(){this.c=document.getElementById("myCanvas"),this.context=this.c.getContext("2d"),this.width=this.context.canvas.clientWidth,this.height=this.context.canvas.clientHeight,this.scale=40}background(t){this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle=t,this.context.beginPath(),this.context.rect(0,0,this.width,this.height),this.context.fill()}pixel(t,e,i){this.context.fillStyle=i,this.context.beginPath(),this.context.rect(t,e,this.scale,this.scale),this.context.fill(),this.context.beginPath(),this.context.lineWidth="4",this.context.strokeStyle="black",this.context.rect(t,e,this.scale,this.scale),this.context.stroke()}text(t,e,i,s){this.context.fillStyle=s,this.context.font=`${this.scale}px Georgia`,this.context.fillText(t,e,i)}};Object.freeze(t);const e=t,{scale:i,width:s,height:h}=e,{scale:o,width:r,height:a}=e;var n=7,c=0;const l=new class{constructor(){this.x=0,this.y=0,this.xspeed=1,this.yspeed=0,this.total=0,this.tail=[]}verifyEat(t){return this._getDistance(this.x,this.y,t.x,t.y)<1&&(this.total++,{x:this.x,y:this.y})}_getDistance(t,e,i,s){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-s,2))}setDirection(t){switch(t){case"left":this.xspeed=-1,this.yspeed=0;break;case"up":this.xspeed=0,this.yspeed=-1;break;case"right":this.xspeed=1,this.yspeed=0;break;case"down":this.xspeed=0,this.yspeed=1}}verifyDeath(){for(var t=0;t<this.tail.length;t++){var e=this.tail[t];if(this._getDistance(this.x,this.y,e.x,e.y)<1)return this.total=0,this.tail=[],!0}return!1}_limit(t,e){return t>=e?e:t<=0?0:t}update(){for(var t=0;t<this.tail.length-1;t++)this.tail[t]=this.tail[t+1];this.total>=1&&(this.tail[this.total-1]={x:this.x,y:this.y}),this.x=this.x+this.xspeed*i,this.y=this.y+this.yspeed*i,this.x=this._limit(this.x,s-i),this.y=this._limit(this.y,h-i),this._draw()}_score(){e.text(`SCORE: ${this.total}`,i,i,"yellow")}_draw(){e.pixel(this.x,this.y,"yellow");for(var t=0;t<this.tail.length;t++)e.pixel(this.tail[t].x,this.tail[t].y,"yellow");this._score()}keyPressed(t){switch(t.key){case"ArrowUp":snake.setDirection("up");break;case"ArrowDown":snake.setDirection("down");break;case"ArrowLeft":snake.setDirection("left");break;case"ArrowRight":snake.setDirection("right")}}},x=new class{constructor(){this.replace(),this.x,this.y}draw(){e.pixel(this.x,this.y,"red")}_getRandomArbitrary(t,e){return Math.floor(Math.floor(Math.random()*(Math.floor((e-o)/o-t+1)+t)))*o}replace(){this.x=this._getRandomArbitrary(0,r),this.y=this._getRandomArbitrary(0,a)}getLocation(){return{x:this.x,y:this.y}}};function y(){console.log("EXIT"),window.history.length>1&&window.history.back()}!function t(){e.background("black");const i=x.getLocation();l.verifyEat(i)&&(x.replace(),n+=.1,console.log(`velocity: ${c}`)),l.verifyDeath()&&(n=7),x.draw(),l.update(),c=Math.round(1e3/n),setTimeout(t,c)}(),window.addEventListener("keydown",(t=>{!function(t){const e={ArrowUp:()=>l.setDirection("up"),ArrowDown:()=>l.setDirection("down"),ArrowLeft:()=>l.setDirection("left"),ArrowRight:()=>l.setDirection("right"),BrowserBack:()=>y(),Exit:()=>y(),default:()=>{}};(e[t]||e.default)()}(t.key)}))})();